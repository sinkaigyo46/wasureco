<%= render "shared/header" %>
<% breadcrumb :root, class: "bread" %>
<div class="index-main">
<%= link_to(new_hobby_path, class: 'purchase-btn') do %>
  <span class='purchase-btn-text'>投稿</span>
  <%= image_tag 'post.png' , size: '70x70' ,class: "purchase-btn-icon" %>
<% end %>

<div class="contents">
    <% # ジャンルごとの合計時間を計算するためのハッシュを初期化 %>
    <% genre_total_times = Hash.new(0) %>

<% @hobby.each do |hobby| %>
<%= link_to hobby_path(hobby) do %>
<div class="item">
<h3 class="date">
<%= hobby.date %>
</h3>
<% end %>
<div class="genre <%= "genre-#{hobby.genre.id}" %>">
<%= hobby.genre.name %>
</div>
<div class="time">
<%= hobby.time %>
h
</div>
<p class="activity">
<%= hobby.activity %>
</p>
<div class="heart">
<div id="like-btn<%= hobby.id %>">
<%= render partial: "likes/like", locals:{ hobby: hobby } %>
</div>
</div>
</div>
 <% # 各ジャンルの合計時間を更新 %>
      <% genre_total_times[hobby.genre.id] += hobby.time %>
      <% end %>
      
    <% # 各ジャンルの合計時間を表示 %>
    <div class="genre-total-times">
      <% genre_total_times.each do |genre_id, total_time| %>
        <p class="genre-total-time">
          <%= Genre.find(genre_id).name %>の合計時間: <%= total_time %>h
        </p>
      <% end %>
    </div>
  </div>
</div>
<%= render "shared/footer" %>

